# PyKara
A full-fledged local karaoke system that runs on Python.

## 機能

- **アトラクトモード**: フルスクリーンで選曲を待機する画面
- **設定機能**: フォントやテーマをカスタマイズ可能（F1キーで設定画面を開く）
- **HTTP APIサーバー**: 別のUI（Webブラウザ、スマートフォンなど）から選曲可能
- **選曲管理**: 選曲情報をリアルタイムで表示

## セットアップ

1. 依存関係をインストール:
```bash
pip install -r requirements.txt
```

2. アプリケーションを起動:
```bash
python main.py
```

または Windows の場合:
```bash
run.bat
```

## API サーバー

アプリケーション起動時に、HTTP APIサーバーが自動的に起動します（デフォルト: http://localhost:8080）。

### API エンドポイント

- `GET /api/status` - サーバー状態を取得
- `POST /api/select` - 選曲を設定
  ```json
  {
    "title": "曲名",
    "artist": "アーティスト名（任意）",
    "metadata": {}
  }
  ```
- `GET /api/selection` - 現在の選曲を取得
- `POST /api/clear` - 選曲をクリア
- `GET /api/songs` - 楽曲リストを取得（モック）

### クライアント例

`client_example.html` をブラウザで開くと、Web UIから選曲できます。

## 設定

設定ファイル (`config.json`) で以下をカスタマイズ可能:

- **フォント**: ファミリー、サイズ、太字設定
- **テーマ**: 背景色、テキスト色、アクセント色
- **サーバー**: ポート番号、ホスト、有効/無効
- **デバッグ**: デバッグモード、トレースバック表示、ログファイル出力

設定はアプリケーション内でF1キーを押すと開く設定ダイアログから変更できます。

### デバッグモード

クラッシュやエラーが発生した場合、デバッグモードを有効にすることで詳細な情報を取得できます。

**設定方法:**
1. アプリケーション起動後、F1キーで設定画面を開く
2. 「デバッグ」タブを選択
3. 「デバッグモードを有効にする」にチェック
4. 「適用」または「OK」をクリック
5. アプリケーションを再起動

または、`config.json`を直接編集:
```json
{
  "debug": {
    "enabled": true,
    "show_traceback": true,
    "log_to_file": false,
    "log_file": "pykara_debug.log"
  }
}
```

デバッグモードを有効にすると:
- 詳細なログメッセージが表示されます
- エラー発生時にスタックトレースが表示されます
- オプションでログファイルに出力できます